@page "/auth/forgot-password"
@layout AuthLayout

<PageTitle>Odzyskiwanie has³a</PageTitle>

<AuthForm Title="Odzyskaj has³o"
          SubmitText="Wyœlij link"
          Model="formModel"
          OnValidSubmit="HandleValidSubmit"
          IsLoading="isSubmitting">
    <ChildContent>
        <AuthErrorBanner Message="@errorMessage" />

        @if (!string.IsNullOrWhiteSpace(infoMessage))
        {
            <div class="alert alert-success" role="alert">
                @infoMessage
            </div>
        }

        <AuthInput Id="forgot-email"
                   Label="E-mail"
                   Type="email"
                   Placeholder="name@example.com"
                   Value="formModel.Email"
                   ValueChanged="@(value => formModel.Email = value ?? string.Empty)"
                   ValueExpression="@(() => formModel.Email)" />
    </ChildContent>

    <FooterContent>
        <div class="text-center">
            <a href="/auth/login">Wróæ do logowania</a>
        </div>
    </FooterContent>
</AuthForm>

@code {
    private readonly ForgotPasswordRequest formModel = new();
    private bool isSubmitting;
    private string? errorMessage;
    private string? infoMessage;

    private Task HandleValidSubmit(EditContext editContext)
    {
        errorMessage = null;
        isSubmitting = false;
        infoMessage = "Jeœli podany adres istnieje w systemie, otrzymasz link do resetu has³a.";
        return Task.CompletedTask;
    }
}

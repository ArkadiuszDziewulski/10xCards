@using Microsoft.AspNetCore.Components.Forms

<div class="card shadow-sm">
    <div class="card-body">
        <h1 class="h4 mb-4">@Title</h1>

        <EditForm Model="Model" OnValidSubmit="OnValidSubmit">
            <DataAnnotationsValidator />
            @if (ShowValidationSummary)
            {
                <ValidationSummary />
            }

            @ChildContent

            <div class="d-grid mt-4">
                <button class="btn btn-primary" type="submit" disabled="@IsLoading">
                    @if (IsLoading)
                    {
                        <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                    }
                    @SubmitText
                </button>
            </div>

            @if (FooterContent is not null)
            {
                <div class="mt-3">
                    @FooterContent
                </div>
            }
        </EditForm>
    </div>
</div>

@code {
    [Parameter, EditorRequired] public object Model { get; set; } = default!;
    [Parameter] public EventCallback<EditContext> OnValidSubmit { get; set; }
    [Parameter, EditorRequired] public string Title { get; set; } = string.Empty;
    [Parameter] public string SubmitText { get; set; } = "Wyœlij";
    [Parameter] public bool IsLoading { get; set; }
    [Parameter] public bool ShowValidationSummary { get; set; }
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public RenderFragment? FooterContent { get; set; }
}
